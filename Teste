-- Hub Kill ao Tocar (Delta Executor) - Final + Botão Sempre Visível
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- Verifica se o RemoteEvent existe
local KillEvent = ReplicatedStorage:FindFirstChild("KillEvent")
if not KillEvent then
    warn("KillEvent não encontrado! Crie um RemoteEvent chamado 'KillEvent' no ReplicatedStorage.")
    return
end

-- Função para criar GUI
local function createGUI()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "HubTesteDelta"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 220, 0, 100)
    frame.Position = UDim2.new(0.5, -110, 0.5, -50)
    frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    frame.Active = true
    frame.Draggable = true
    frame.Parent = ScreenGui

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.8, 0, 0, 60)
    button.Position = UDim2.new(0.1, 0, 0.2, 0)
    button.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Text = "Ativar Kill"
    button.TextScaled = true
    button.Parent = frame

    local killEnabled = false
    button.MouseButton1Click:Connect(function()
        killEnabled = not killEnabled
        button.Text = killEnabled and "Kill: ON" or "Ativar Kill"
    end)

    return killEnabled, ScreenGui
end

local killEnabled, ScreenGui = createGUI()

-- Truque para manter o GUI sempre visível
RunService.RenderStepped:Connect(function()
    if ScreenGui.Parent ~= LocalPlayer:WaitForChild("PlayerGui") then
        ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
    end
end)

-- Função de Kill ao tocar
local function setupCharacter(char)
    local hrp = char:WaitForChild("HumanoidRootPart")
    hrp.Touched:Connect(function(hit)
        if killEnabled then
            local targetPlayer = Players:GetPlayerFromCharacter(hit.Parent)
            if targetPlayer and targetPlayer ~= LocalPlayer then
                KillEvent:FireServer(hit.Parent)
            end
        end
    end)
end

-- Setup inicial e respawn
if LocalPlayer.Character then
    setupCharacter(LocalPlayer.Character)
end
LocalPlayer.CharacterAdded:Connect(setupCharacter)
